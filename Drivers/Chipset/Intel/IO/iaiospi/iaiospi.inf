;/*++
;
;Copyright (c) 2009-2013 Intel Corporation All rights Reserved
;
;Module Name:
;    iaiospi.inf
;
;Abstract:
;    INF file for installing the Intel(R) Atom(TM) Processor SPI Controller driver
;
;--*/

[Version]
Signature="$WINDOWS NT$"
Class=System
ClassGuid={4D36E97D-E325-11CE-BFC1-08002BE10318}
Provider=%INTEL%
DriverVer=09/11/2014,1.1.6.1030
CatalogFile=iaiospi.cat
PnPLockDown=1

;-------------------------------------------------------------------------------
;   Device Section
;-------------------------------------------------------------------------------

[Manufacturer]
%INTEL%=Intel,NTamd64

[Intel.NTamd64]

%iaiospi.DeviceDesc%=iaiospi_Device, PCI\VEN_8086&DEV_0F0E

;-------------------------------------------------------------------------------
;   Driver Section
;-------------------------------------------------------------------------------

[iaiospi_Device.NT]
CopyFiles=Drivers_Dir
Reboot

;-------------- Service installation section

[iaiospi_Device.NT.Services]
AddService = iaiospi,%SPSVCINST_ASSOCSERVICE%, iaiospi.AddService


[spi_Service_addReg]
HKLM, "System\CurrentControlSet\Control\SafeBoot\Minimal\iaiospi.sys",,,"Driver"

; -------------- Driver install section
[iaiospi.AddService]
DisplayName    = %Driver_Service.Desc%
ServiceType    = 1               ; SERVICE_KERNEL_DRIVER
StartType      = 3               ; SERVICE_DEMAND_START 
ErrorControl   = 1               ; SERVICE_ERROR_NORMAL
ServiceBinary  = %12%\iaiospi.sys
AddReg         = spi_Service_addReg

;----------------------------------------------------------------------
;   Class Section
;----------------------------------------------------------------------

[DestinationDirs]
DefaultDestDir = 12

[Drivers_Dir]
iaiospi.sys

[SourceDisksNames]
1 = %DiskId1%,,,""

[SourceDisksFiles]
iaiospi.sys  = 1,,

;----------------------------------------------------------------------
;--- iaiospi_Device Coinstaller installation ------
;----------------------------------------------------------------------

[DestinationDirs]
iaiospi_Device_CoInstaller_CopyFiles = 11

[iaiospi_Device.NT.CoInstallers]
AddReg=iaiospi_Device_CoInstaller_AddReg
CopyFiles=iaiospi_Device_CoInstaller_CopyFiles

[iaiospi_Device_CoInstaller_AddReg]
HKR,,CoInstallers32,0x00010000, "WdfCoInstaller01011.dll,WdfCoInstaller"

[iaiospi_Device_CoInstaller_CopyFiles]
WdfCoInstaller01011.dll

[SourceDisksFiles]
WdfCoInstaller01011.dll=1 ; make sure the number matches with SourceDisksNames

[iaiospi_Device.NT.Wdf]
KmdfService =  iaiospi, iaiospi_wdfsect
[iaiospi_wdfsect]
KmdfLibraryVersion = 1.11

;----------------------------------------------------------------------
;   Strings
;----------------------------------------------------------------------

[Strings]
SPSVCINST_ASSOCSERVICE = 0x00000002
INTEL = "Intel Corporation"
DiskId1 = "Intel(R) Atom(TM) Processor SPI Controller Installation Disk #1"
Driver_Service.Desc = "Intel Atom Processor SPI Controller Service"
iaiospi.DeviceDesc = "Intel(R) Atom(TM)/Celeron(R)/Pentium(R) Processor SPI Controller"
